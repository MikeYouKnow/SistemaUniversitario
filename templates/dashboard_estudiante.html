{% extends "base.html" %}
{% block title %}Perfil Estudiante{% endblock %}

{% block content %}
<style>
  .profile-header-card {
    border-radius: 24px;
    border: none;
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
  }

  .profile-avatar {
    width: 90px;
    height: 90px;
    border-radius: 999px;
    background: #2563eb;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    font-size: 2rem;
    font-weight: 700;
    margin: 0 auto 0.75rem auto;
  }

  .profile-badge-role {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem 0.7rem;
    border-radius: 999px;
    background: #2563eb;
    color: #ffffff;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem 0.7rem;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-right: 0.35rem;
    margin-bottom: 0.35rem;
  }

  .chip-success {
    background: #bbf7d0;
    color: #166534;
  }

  .chip-gray {
    background: #e5e7eb;
    color: #374151;
  }

  .chip-soft {
    background: #e5e7eb;
    color: #4b5563;
  }

  .profile-tabs .nav-link {
    border: none;
    border-bottom: 2px solid transparent;
    color: #6b7280;
    font-weight: 500;
    font-size: 0.9rem;
    border-radius: 0;
    padding: 0.5rem 0.9rem;
  }

  .profile-tabs .nav-link.active {
    color: #2563eb;
    border-bottom-color: #2563eb;
    background: transparent;
  }

  .info-card {
    border-radius: 18px;
    border: none;
    background: #e5f0ff;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.04);
  }

  .info-card h6 {
    font-weight: 700;
    font-size: 0.95rem;
  }

  .info-table {
    width: 100%;
    font-size: 0.85rem;
  }

  .info-table td {
    padding: 0.25rem 0;
  }

  .info-label {
    color: #6b7280;
    width: 45%;
  }

  .info-value {
    font-weight: 500;
  }

  .table-soft {
    background: #e5f0ff;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.04);
  }

  .table-soft thead {
    background: #dbeafe;
    font-size: 0.82rem;
  }

  .table-soft tbody tr {
    background: transparent;
  }

  .badge-soft-success {
    background: #bbf7d0;
    color: #166534;
    border-radius: 999px;
    padding: 0.1rem 0.6rem;
    font-size: 0.75rem;
  }
</style>

<!-- Encabezado de perfil -->
<div class="card profile-header-card mb-3">
  <div class="card-body text-center py-4">
    {% set nombre = user.nombre_usuario or 'Estudiante' %}
    {% set iniciales = nombre[:2]|upper %}

    <div class="profile-avatar">
      {{ iniciales }}
    </div>

    <div class="mb-1">
      <span class="profile-badge-role me-2">Ing.</span>
      <span class="fw-semibold" style="font-size:1.05rem;">
        {{ nombre }} {{ user.apellidos if user.apellidos is defined }}
      </span>
    </div>

    <div class="text-muted" style="font-size:0.9rem;">
      Ingeniería en Sistemas Computacionales<br>
      Matrícula: 20240156
    </div>

    <div class="mt-3">
      <span class="chip chip-success">Activo</span>
      <span class="chip chip-gray">Enero–Junio 2024</span>
      <span class="chip chip-gray">6° Semestre</span>
      <span class="chip chip-soft">Promedio: 8.7</span>
    </div>
  </div>
</div>

<!-- Tabs -->
<ul class="nav nav-tabs justify-content-center profile-tabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="tab-info-tab" data-bs-toggle="tab"
            data-bs-target="#tab-info" type="button" role="tab">
      Información
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-materias-tab" data-bs-toggle="tab"
            data-bs-target="#tab-materias" type="button" role="tab">
      Materias &amp; Horario
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-biblio-tab" data-bs-toggle="tab"
            data-bs-target="#tab-biblio" type="button" role="tab">
      Biblioteca
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-docs-tab" data-bs-toggle="tab"
            data-bs-target="#tab-docs" type="button" role="tab">
      Documentos &amp; QR
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-forms-tab" data-bs-toggle="tab"
            data-bs-target="#tab-forms" type="button" role="tab">
      Formularios
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-aulas-tab" data-bs-toggle="tab"
            data-bs-target="#tab-aulas" type="button" role="tab">
      Aulas
    </button>
  </li>
</ul>

<div class="tab-content mt-3">

  <!-- TAB: INFORMACIÓN -->
  <div class="tab-pane fade show active" id="tab-info" role="tabpanel" aria-labelledby="tab-info-tab">
    <div class="row g-3">
      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Datos Personales</h6>
            <table class="info-table">
              <tr>
                <td class="info-label">Nombre completo</td>
                <td class="info-value">{{ nombre }}</td>
              </tr>
              <tr>
                <td class="info-label">CURP</td>
                <td class="info-value">SAMJ001025HDFNRN09</td>
              </tr>
              <tr>
                <td class="info-label">Fecha de nacimiento</td>
                <td class="info-value">25/10/2000</td>
              </tr>
              <tr>
                <td class="info-label">Género</td>
                <td class="info-value">Masculino</td>
              </tr>
              <tr>
                <td class="info-label">Nacionalidad</td>
                <td class="info-value">Mexicana</td>
              </tr>
              <tr>
                <td class="info-label">Estado civil</td>
                <td class="info-value">Soltero</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Información Académica</h6>
            <table class="info-table">
              <tr>
                <td class="info-label">Matrícula</td>
                <td class="info-value">20240156</td>
              </tr>
              <tr>
                <td class="info-label">Carrera</td>
                <td class="info-value">Ing. Sistemas Computacionales</td>
              </tr>
              <tr>
                <td class="info-label">Plan de estudios</td>
                <td class="info-value">ISC–2018–224</td>
              </tr>
              <tr>
                <td class="info-label">Modalidad</td>
                <td class="info-value">Escolarizada</td>
              </tr>
              <tr>
                <td class="info-label">Campus</td>
                <td class="info-value">Campus Principal</td>
              </tr>
              <tr>
                <td class="info-label">Periodo actual</td>
                <td class="info-value">Enero–Junio 2024</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Información de Contacto</h6>
            <table class="info-table">
              <tr>
                <td class="info-label">Correo electrónico</td>
                <td class="info-value">juan.sanchez@estudiante.tec.mx</td>
              </tr>
              <tr>
                <td class="info-label">Teléfono</td>
                <td class="info-value">+52 81 1234 5678</td>
              </tr>
              <tr>
                <td class="info-label">Dirección</td>
                <td class="info-value">Av. Universidad 123</td>
              </tr>
              <tr>
                <td class="info-label">Ciudad</td>
                <td class="info-value">Monterrey, Nuevo León</td>
              </tr>
              <tr>
                <td class="info-label">Código postal</td>
                <td class="info-value">64000</td>
              </tr>
              <tr>
                <td class="info-label">Contacto de emergencia</td>
                <td class="info-value">Padre / Madre</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Segunda fila: tutor y progreso -->
    <div class="row g-3 mt-1">
      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Tutor Académico</h6>
            <table class="info-table">
              <tr>
                <td class="info-label">Nombre</td>
                <td class="info-value">Dead Pirate Roberts</td>
              </tr>
              <tr>
                <td class="info-label">Correo</td>
                <td class="info-value">tutor@universidad.mx</td>
              </tr>
              <tr>
                <td class="info-label">Oficina</td>
                <td class="info-value">Edificio A, oficina 203</td>
              </tr>
              <tr>
                <td class="info-label">Horario atención</td>
                <td class="info-value">Lun–Vie 9 a 13 h</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Progreso Académico</h6>
            <table class="info-table">
              <tr>
                <td class="info-label">Periodo actual</td>
                <td class="info-value">Enero–Junio 2024</td>
              </tr>
              <tr>
                <td class="info-label">Semestre</td>
                <td class="info-value">6° semestre</td>
              </tr>
              <tr>
                <td class="info-label">Promedio</td>
                <td class="info-value">8.7</td>
              </tr>
              <tr>
                <td class="info-label">Créditos aprobados</td>
                <td class="info-value">120 / 275</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card info-card h-100">
          <div class="card-body">
            <h6 class="mb-3">Más información</h6>
            <p class="mb-0" style="font-size:0.85rem;">
              Aquí puedes agregar más secciones descriptivas o indicadores
              personalizados para el alumno.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: MATERIAS & HORARIO -->
  <div class="tab-pane fade" id="tab-materias" role="tabpanel" aria-labelledby="tab-materias-tab">
    <div class="card info-card mb-3">
      <div class="card-body">
        <h6 class="mb-3">Materias en curso</h6>
        <div class="mb-2">
          <input type="text" class="form-control form-control-sm"
                 placeholder="Buscar materia...">
        </div>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Clave</th>
                <th>Materia</th>
                <th>Grupo</th>
                <th>Créditos</th>
                <th>Profesor</th>
                <th>Aula</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>MA201</td>
                <td>Cálculo Diferencial</td>
                <td>B2</td>
                <td>8</td>
                <td>Dra. López</td>
                <td>201</td>
              </tr>
              <tr>
                <td>CS101</td>
                <td>Programación I</td>
                <td>A1</td>
                <td>10</td>
                <td>Dr. García</td>
                <td>Lab-A</td>
              </tr>
              <tr>
                <td>MA301</td>
                <td>Ecuaciones Diferenciales</td>
                <td>B2</td>
                <td>8</td>
                <td>Ing. Almazán</td>
                <td>201</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Horario semanal ejemplo -->
    <div class="card info-card">
      <div class="card-body">
        <h6 class="mb-3">Horario semanal (Diario)</h6>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Día</th>
                <th>Inicio</th>
                <th>Fin</th>
                <th>Materia</th>
                <th>Descripción</th>
                <th>Aula</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Lunes</td>
                <td>08:00</td>
                <td>10:00</td>
                <td>Programación I</td>
                <td>Clase teórica</td>
                <td>Lab-A</td>
              </tr>
              <tr>
                <td>Miércoles</td>
                <td>09:45</td>
                <td>10:40</td>
                <td>Cálculo Diferencial</td>
                <td>Clase</td>
                <td>201</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: BIBLIOTECA -->
  <div class="tab-pane fade" id="tab-biblio" role="tabpanel" aria-labelledby="tab-biblio-tab">
    <div class="card info-card mb-3">
      <div class="card-body">
        <h6 class="mb-3">Préstamos activos</h6>
        <div class="mb-2">
          <input type="text" class="form-control form-control-sm"
                 placeholder="Buscar préstamos...">
        </div>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Título</th>
                <th>Autor</th>
                <th>Entrega</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Cien años de soledad</td>
                <td>Gabriel García Márquez</td>
                <td>15 Mar 2024</td>
                <td><span class="badge-soft-success">Al día</span></td>
              </tr>
              <tr>
                <td>El amor en los tiempos del cólera</td>
                <td>Gabriel García Márquez</td>
                <td>18 Mar 2024</td>
                <td><span class="badge-soft-success">Vence hoy</span></td>
              </tr>
              <tr>
                <td>Don Quijote de la Mancha</td>
                <td>Miguel de Cervantes</td>
                <td>12 Mar 2024</td>
                <td><span class="badge-soft-success">Atrasado</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="card info-card">
      <div class="card-body">
        <h6 class="mb-3">Historial de préstamos</h6>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Título</th>
                <th>Autor</th>
                <th>Entrega</th>
                <th>Devolución</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>La casa de los espíritus</td>
                <td>Isabel Allende</td>
                <td>01 Mar 2024</td>
                <td>10 Mar 2024</td>
                <td>Devuelto</td>
              </tr>
              <tr>
                <td>Rayuela</td>
                <td>Julio Cortázar</td>
                <td>20 Feb 2024</td>
                <td>28 Feb 2024</td>
                <td>Devuelto</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: DOCUMENTOS & QR -->
  <div class="tab-pane fade" id="tab-docs" role="tabpanel" aria-labelledby="tab-docs-tab">
    <div class="card info-card">
      <div class="card-body">
        <h6 class="mb-3">Documentación del expediente</h6>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Título del documento</th>
                <th>Estatus</th>
                <th>Entrega</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CURP</td>
                <td><span class="badge-soft-success">Activo</span></td>
                <td>01 Mar 2024</td>
              </tr>
              <tr>
                <td>Acta de nacimiento</td>
                <td><span class="badge-soft-success">Activo</span></td>
                <td>20 Feb 2024</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="mt-3">
          <h6 class="mb-2">Credencial escolar</h6>
          <p class="mb-0" style="font-size:0.85rem;">
            Aquí podrías mostrar un botón para generar código QR
            o descargar la credencial en PDF.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: FORMULARIOS -->
  <div class="tab-pane fade" id="tab-forms" role="tabpanel" aria-labelledby="tab-forms-tab">
    <div class="card info-card">
      <div class="card-body">
        <h6 class="mb-3">Formularios disponibles</h6>
        <div class="row g-2">
          <div class="col-md-4">
            <div class="card border-0" style="border-radius:16px; background:#e5f0ff;">
              <div class="card-body d-flex justify-content-between align-items-center">
                <span style="font-size:0.9rem;">Ficha de identificación</span>
                <button class="btn btn-sm btn-outline-primary">Ver</button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card border-0" style="border-radius:16px; background:#e5f0ff;">
              <div class="card-body d-flex justify-content-between align-items-center">
                <span style="font-size:0.9rem;">Entrevista</span>
                <button class="btn btn-sm btn-outline-primary">Ver</button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card border-0" style="border-radius:16px; background:#e5f0ff;">
              <div class="card-body d-flex justify-content-between align-items-center">
                <span style="font-size:0.9rem;">Estudio socioeconómico</span>
                <button class="btn btn-sm btn-outline-primary">Ver</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: AULAS -->
  <div class="tab-pane fade" id="tab-aulas" role="tabpanel" aria-labelledby="tab-aulas-tab">
    <div class="card info-card">
      <div class="card-body">
        <h6 class="mb-3">Búsqueda de aula</h6>
        <div class="row g-2 mb-3">
          <div class="col-md-4">
            <label class="form-label mb-1" style="font-size:0.8rem;">Carrera</label>
            <select class="form-select form-select-sm">
              <option>Selecciona tu carrera</option>
              <option>Ing. Sistemas</option>
              <option>Ing. Industrial</option>
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label mb-1" style="font-size:0.8rem;">Día</label>
            <select class="form-select form-select-sm">
              <option>Lunes</option>
              <option>Martes</option>
              <option>Miércoles</option>
              <option>Jueves</option>
              <option>Viernes</option>
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label mb-1" style="font-size:0.8rem;">Hora (inicio/fin)</label>
            <input type="time" class="form-control form-control-sm">
          </div>
        </div>

        <button class="btn btn-primary btn-sm mb-3">
          Buscar
        </button>

        <h6 class="mb-2">Resultados</h6>
        <div class="table-responsive table-soft">
          <table class="table table-sm mb-0">
            <thead>
            <tr>
              <th>ID Materia</th>
              <th>Edificio</th>
              <th>Piso</th>
              <th>Materia</th>
              <th>Clave</th>
              <th>Día</th>
              <th>Horario</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>20230156</td>
              <td>2</td>
              <td>2</td>
              <td>FAQ</td>
              <td>2204</td>
              <td>Miércoles</td>
              <td>09:45–10:40</td>
            </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

</div>
{% endblock %}
