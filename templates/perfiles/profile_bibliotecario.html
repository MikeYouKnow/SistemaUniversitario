{% extends "base.html" %}

{% block content %}
<div class="container-fluid py-4">

  <!-- ENCABEZADO -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-0">Panel de Bibliotecario</h2>
      <p class="text-muted mb-0">
        Bienvenido, {{ user.nombre_usuario if user else "Bibliotecario" }}.
      </p>
    </div>
    <div>
      <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm">
        Cerrar sesión
      </a>
    </div>
  </div>

  <!-- FILA PRINCIPAL -->
  <div class="row">

    <!-- Columna izquierda -->
    <div class="col-lg-4 mb-4">
      <!-- Tarjeta: Información del usuario -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <strong>Tu perfil</strong>
        </div>
        <div class="card-body">
          <p class="mb-1"><strong>Usuario:</strong> {{ user.nombre_usuario }}</p>
          <p class="mb-1"><strong>Correo:</strong> {{ user.correo_electronico }}</p>
          <p class="mb-1">
            <strong>Rol actual:</strong>
            {{ user.rol_actual if user.rol_actual else "Bibliotecario" }}
          </p>
          <hr>
          <p class="small text-muted mb-0">
            Desde este panel puedes revisar el catálogo de libros, gestionar préstamos
            y ver el historial de movimientos de la biblioteca.
          </p>
        </div>
      </div>

      <!-- Tarjeta: Accesos rápidos -->
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <strong>Accesos rápidos</strong>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a href="{{ url_for('est_perfil_biblioteca') }}" class="btn btn-primary btn-sm">
              Ver préstamos de ejemplo (modo estudiante)
            </a>
            <a href="#" class="btn btn-outline-primary btn-sm disabled">
              Registrar nuevo préstamo (próximamente)
            </a>
            <a href="#" class="btn btn-outline-secondary btn-sm disabled">
              Devoluciones y sanciones (próximamente)
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Columna derecha -->
    <div class="col-lg-8 mb-4">

      <!-- Tarjeta: Resumen de biblioteca -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-secondary text-white d-flex justify-content-between">
          <span><strong>Resumen de la biblioteca</strong></span>
          <span class="small">Vista demo</span>
        </div>
        <div class="card-body">
          <div class="row text-center">
            <div class="col-6 col-md-3 mb-3">
              <h4 class="mb-0">2</h4>
              <span class="text-muted small">Libros demo</span>
            </div>
            <div class="col-6 col-md-3 mb-3">
              <h4 class="mb-0">1</h4>
              <span class="text-muted small">Préstamo activo</span>
            </div>
            <div class="col-6 col-md-3 mb-3">
              <h4 class="mb-0">1</h4>
              <span class="text-muted small">Estudiante con préstamo</span>
            </div>
            <div class="col-6 col-md-3 mb-3">
              <h4 class="mb-0">0</h4>
              <span class="text-muted small">Retrasos (demo)</span>
            </div>
          </div>
          <hr>
          <p class="small text-muted mb-0">
            Estos datos son de prueba, generados con los inserts del script
            de ejemplo. Cuando se implementen las consultas reales para el
            módulo de bibliotecario, este panel reflejará la información en vivo.
          </p>
        </div>
      </div>

      <!-- Tarjeta: Catálogo y préstamos -->
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <strong>Catálogo y préstamos</strong>
        </div>
        <div class="card-body">

          <!-- Buscador "visual" (solo diseño) -->
          <form class="row g-2 mb-3">
            <div class="col-sm-8">
              <input
                type="text"
                class="form-control form-control-sm"
                placeholder="Buscar libro por título, autor, clasificación..."
                disabled
              >
            </div>
            <div class="col-sm-4 d-grid">
              <button class="btn btn-sm btn-primary" type="button" disabled>
                Buscar (demo)
              </button>
            </div>
          </form>

          <!-- Tabla demo -->
          <div class="table-responsive">
            <table class="table table-sm align-middle">
              <thead class="table-light">
                <tr>
                  <th>Título</th>
                  <th>Clasificación</th>
                  <th>Editorial</th>
                  <th class="text-center">Disponibles</th>
                  <th class="text-center">Acción</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Sistemas Operativos Modernos</td>
                  <td>QA76</td>
                  <td>Pearson</td>
                  <td class="text-center">4</td>
                  <td class="text-center">
                    <button class="btn btn-outline-primary btn-sm" disabled>
                      Ver detalle
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>Fundamentos de Bases de Datos</td>
                  <td>QA76</td>
                  <td>McGraw-Hill</td>
                  <td class="text-center">4</td>
                  <td class="text-center">
                    <button class="btn btn-outline-primary btn-sm" disabled>
                      Ver detalle
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <p class="small text-muted mt-2 mb-0">
            En producción, esta tabla se llenará usando consultas a
            <code>biblioteca.Libros</code>, <code>Inventario</code>, etc.
            Por ahora solo replica el estilo del panel de estudiante para
            que todos los roles se vean consistentes.
          </p>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
