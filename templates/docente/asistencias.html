{% extends "base.html" %}
{% block title %}Asistencias{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Lista de alumnos por grupo</h2>

  {% if materias_docente %}
    <form class="row g-2 mt-2 mb-3" method="get" action="{{ url_for('docente_asistencias') }}">
      <div class="col-md-6">
        <label for="materia_alta_id" class="form-label">Materia</label>
        <select name="materia_alta_id" id="materia_alta_id"
                class="form-select" onchange="this.form.submit()">
          {% for m in materias_docente %}
            <option value="{{ m.materia_alta_id }}"
              {% if m.materia_alta_id|string == materia_alta_id|string %}selected{% endif %}>
              {{ m.ciclo }} - {{ m.etiqueta }}
            </option>
          {% endfor %}
        </select>
      </div>
    </form>

    {% if lista_alumnos %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead>
            <tr>
              <th>NÃºmero de control</th>
              <th>Alumno</th>
            </tr>
          </thead>
          <tbody>
            {% for a in lista_alumnos %}
            <tr>
              <td>{{ a.numero_control }}</td>
              <td>{{ a.alumno }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-info mt-3">
        No hay alumnos inscritos en esta materia.
      </div>
    {% endif %}
  {% else %}
    <div class="alert alert-warning mt-3">
      No tienes materias asignadas actualmente. Pide al administrador o coordinador que te asigne grupos.
    </div>
  {% endif %}

  <a href="{{ url_for('perfil_docente') }}" class="btn btn-secondary mt-3">
    Volver al panel del docente
  </a>
</div>
{% endblock %}
